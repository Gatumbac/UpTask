!function(){function e(e,t,n){const a=document.querySelector(".alert");a&&a.remove();const o=document.createElement("DIV");o.textContent=e,o.classList.add("alert",t),n.parentElement.insertBefore(o,n.nextElementSibling),setTimeout((function(){o.remove()}),5e3)}function t(e,t){setTimeout((function(){e.remove()}),t)}document.querySelector("#newtask-button").addEventListener("click",(function(){const n=document.createElement("DIV");n.classList.add("modal"),n.innerHTML='\n            <form class="newtask-form" method=\'POST\'>\n                <legend>Añade una nueva tarea</legend>\n                <div class="field">\n                    <label for="task">Tarea</label>\n                    <input\n                        type="text"\n                        name="name"\n                        id="task"\n                        placeholder="Nombre de la tarea"\n                    />\n                </div>\n\n                <div class="newtask-options">\n                    <input\n                        type="submit"\n                        class="newtask-submit"\n                        value="Añadir Tarea"\n                    />\n                    <button type="button" class="close-newtask">Cancelar</button>\n                </div>\n            </form>\n        ',setTimeout((function(){document.querySelector(".newtask-form").classList.add("show")}),0),n.addEventListener("click",(function(a){if(a.preventDefault(),a.target.classList.contains("close-newtask")){document.querySelector(".newtask-form").classList.add("close"),t(n,500)}a.target.classList.contains("newtask-submit")&&function(){const n=document.querySelector("#task").value.trim();if(n.length<4||n.length>60)return void e("El nombre de la tarea es obligatorio y debe ser válido","error",document.querySelector(".newtask-form legend"));!async function(n){const a=new FormData;a.append("name",n),a.append("project_id",function(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}());try{const n="/api/tarea",o=await fetch(n,{method:"POST",body:a}),s=await o.json();e(s.message,s.type,document.querySelector(".newtask-form legend")),"success"===s.type&&t(document.querySelector(".modal"),3e3)}catch(e){console.log(e)}}(n)}()})),document.querySelector("BODY").appendChild(n)}))}();//# sourceMappingURL=tasks.js.map
